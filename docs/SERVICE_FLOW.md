# ğŸ”„ Newturn ì„œë¹„ìŠ¤ ì „ì²´ í”Œë¡œìš°

**ì‘ì„±ì¼**: 2024.11.07  
**ëª©ì **: ì ˆì•½ â†’ ì£¼ì‹ íˆ¬ì ì‹œìŠ¤í…œì˜ ì „ì²´ ì‚¬ìš©ì ì—¬ì • ë° ê¸°ìˆ  í”Œë¡œìš°

---

## ğŸ¯ **ì„œë¹„ìŠ¤ í•µì‹¬ ê°œë…**

> **"ì¼ìƒ ì†Œë¹„ ì ˆì•½ â†’ ì†Œì•¡ ì£¼ì‹ íˆ¬ì â†’ ìˆ˜ìµ ì‹œ ë¦¬ì›Œë“œ ì§€ê¸‰"**

**ë§ˆì‹œë©œë¡œ ì‹¤í—˜ ì ìš©:**
- ì»¤í”¼/ê³¼ì ë“± ì†Œë¹„ë¥¼ ì ˆì œ
- ì ˆì•½í•œ ëˆìœ¼ë¡œ ì£¼ì‹ íˆ¬ì
- ìˆ˜ìµì´ ë‚˜ë©´ ê·¸ë•Œ ì›ë˜ í•˜ê³  ì‹¶ì—ˆë˜ ê²ƒ í•˜ê¸°
- ì†ì‹¤ì´ë©´ ë³´ìœ  ê°•ì œ (ì¸ë‚´ì‹¬ í•™ìŠµ)

---

## ğŸ“± **ì „ì²´ ì‚¬ìš©ì í”Œë¡œìš°**

### **1ë‹¨ê³„: ê³„ì • ì„¤ì •**

```
ì‚¬ìš©ì ê°€ì…
  â†“
ì€í–‰ ê³„ì¢Œ ì—°ê²° (ì„ íƒ, Plaid)
  - Plaid Linkë¡œ ì€í–‰ ê³„ì¢Œ ì—°ê²°
  - Chase, Bank of America ë“±
  â†“
ì¹´í…Œê³ ë¦¬ë³„ í†µì¥ ìƒì„±
  - "ì¹´í˜/ë² ì´ì»¤ë¦¬ í†µì¥" ìƒì„±
  - ì›” ì˜ˆì‚° ì„¤ì • (ì˜ˆ: $100)
  - ì€í–‰ ê³„ì¢Œ ì—°ë™ (ì„ íƒ)
    * ìë™ ë™ê¸°í™” í™œì„±í™”
    * ì¹´í…Œê³ ë¦¬ ë§¤í•‘ ê·œì¹™ ì„¤ì •
  - ì´ˆê¸° ì…ê¸ˆ (ì„ íƒ)
```

**ì˜ˆì‹œ:**
- í†µì¥ëª…: "ì¹´í˜/ë² ì´ì»¤ë¦¬ í†µì¥"
- ì›” ì˜ˆì‚°: $100
- ì—°ë™ ê³„ì¢Œ: Chase Checking ****1234
- ìë™ ë™ê¸°í™”: í™œì„±í™”
- ë§¤í•‘ ê·œì¹™: merchant_nameì— "starbucks", "coffee" í¬í•¨
- ì´ˆê¸° ì…ê¸ˆ: $0 (ë˜ëŠ” $50)

---

### **2ë‹¨ê³„: ì¼ìƒ ì†Œë¹„ ê´€ë¦¬**

**ì˜µì…˜ A: ìˆ˜ë™ ì…ë ¥**
```
ë§¤ì¼ ì†Œë¹„ ê¸°ë¡
  â†“
í†µì¥ì—ì„œ ì¶œê¸ˆ
  - ìŠ¤íƒ€ë²…ìŠ¤ ì•„ë©”ë¦¬ì¹´ë…¸: $5
  - ë„ë„›: $3
  - ì´ ì‚¬ìš©: $8
```

**ì˜µì…˜ B: ìë™ ë™ê¸°í™” (ì€í–‰ ê³„ì¢Œ ì—°ë™ ì‹œ)**
```
ë§¤ì¼ ìë™ ë™ê¸°í™” (ìƒˆë²½ 2ì‹œ)
  â†“
Plaid Transactions API
  - ìµœê·¼ ê±°ë˜ ë‚´ì—­ ì¡°íšŒ
  - ì¹´í…Œê³ ë¦¬ ë§¤í•‘
    * "Starbucks" â†’ ì¹´í˜/ë² ì´ì»¤ë¦¬ í†µì¥
    * "Dunkin Donuts" â†’ ì¹´í˜/ë² ì´ì»¤ë¦¬ í†µì¥
  â†“
ìë™ìœ¼ë¡œ Transaction ìƒì„±
  - type: 'bank_sync'
  - is_synced_from_bank: True
  â†“
í†µì¥ ìë™ ì—…ë°ì´íŠ¸
  - balance ê°ì†Œ
  - current_month_spent ì¦ê°€
```

**ì›”ë§ ì ˆì•½ ê³„ì‚°:**
- ì˜ˆì‚°: $100
- ì‹¤ì œ ì‚¬ìš©: $70 (ìë™ ë™ê¸°í™” ë˜ëŠ” ìˆ˜ë™ ì…ë ¥)
- ì ˆì•½: $30 âœ…

**UI:**
- í™ˆ í™”ë©´: "ì˜¤ëŠ˜ ì•„ë‚€ ëˆ" ì¹´ë“œ
- ë¹ ë¥¸ ì…ë ¥: "ì»¤í”¼ $5 ì•„ê¼ˆì–´ìš”" ë²„íŠ¼ (ìˆ˜ë™)
- ìë™ ë™ê¸°í™”: "ìµœê·¼ ë™ê¸°í™”: 2ì‹œê°„ ì „" í‘œì‹œ
- í†µì¥ ì”ì•¡ ì‹¤ì‹œê°„ í‘œì‹œ

---

### **3ë‹¨ê³„: ì ˆì•½ ê¸ˆì•¡ìœ¼ë¡œ ì£¼ì‹ íˆ¬ì**

```
ì ˆì•½ ê¸ˆì•¡ í™•ì¸
  - ì´ë²ˆ ë‹¬ ì ˆì•½: $30
  â†“
ì¢…ëª© ì„ íƒ
  - Newturn ì¶”ì²œ ì¢…ëª© ë³´ê¸°
  - 4ê°œ ë©”ì´íŠ¸ ì ìˆ˜ í™•ì¸
  - ì¢…ëª© ì„ íƒ (ì˜ˆ: NVDA)
  â†“
íˆ¬ì ì‹¤í–‰
  - $30ìœ¼ë¡œ NVDA ë§¤ìˆ˜
  - í˜„ì¬ê°€: $500
  - ë§¤ìˆ˜ ì£¼ìˆ˜: 0.06ì£¼ (ì‹œë®¬ë ˆì´ì…˜) ë˜ëŠ” 0ì£¼ (ì‹¤ì œëŠ” ìµœì†Œ 1ì£¼)
  â†“
íˆ¬ì ê¸°ë¡ ìƒì„±
  - SavingsReward ìƒì„±
  - ìƒíƒœ: "íˆ¬ì ì¤‘"
```

**ì‹œë®¬ë ˆì´ì…˜ ëª¨ë“œ:**
- ì‹¤ì œ ë§¤ìˆ˜ ì—†ì´ DBì— ê¸°ë¡ë§Œ
- ì£¼ê°€ ì—…ë°ì´íŠ¸ë¡œ í˜„ì¬ ê°€ì¹˜ ê³„ì‚°
- ìˆ˜ìµ/ì†ì‹¤ ì¶”ì 

**ì‹¤ì œ ëª¨ë“œ (Alpaca):**
- Alpaca APIë¡œ ì‹¤ì œ ë§¤ìˆ˜
- ì˜ˆì¹˜ê¸ˆì—ì„œ ì°¨ê°
- ì‹¤ì œ í¬ì§€ì…˜ ë³´ìœ 

---

### **4ë‹¨ê³„: íˆ¬ì ì„±ê³¼ ì¶”ì **

```
ë§¤ì¼ ìë™ ì—…ë°ì´íŠ¸
  - ì£¼ê°€ ì¡°íšŒ (Alpaca API ë˜ëŠ” ì‹œë®¬ë ˆì´ì…˜)
  - í˜„ì¬ ê°€ì¹˜ ê³„ì‚°
  - ìˆ˜ìµë¥  ê³„ì‚°
  â†“
ëŒ€ì‹œë³´ë“œ í‘œì‹œ
  - íˆ¬ì ê¸ˆì•¡: $30
  - í˜„ì¬ ê°€ì¹˜: $35
  - ìˆ˜ìµë¥ : +16.7% âœ…
  - ìƒíƒœ: "ë§¤ë„ ê°€ëŠ¥" (ìˆ˜ìµ)
```

**ì¡°ê±´:**
- **ìˆ˜ìµ ìƒíƒœ**: `current_value > purchase_cost` â†’ ë§¤ë„ ê°€ëŠ¥
- **ì†ì‹¤ ìƒíƒœ**: `current_value <= purchase_cost` â†’ ë§¤ë„ ë¶ˆê°€, ë³´ìœ  ê°•ì œ

---

### **5ë‹¨ê³„: ìˆ˜ìµ ì‹¤í˜„ (ë§¤ë„)**

```
ìˆ˜ìµ í™•ì¸
  - í˜„ì¬ ê°€ì¹˜: $35
  - ë§¤ìˆ˜ ê°€ê²©: $30
  - ìˆ˜ìµ: $5 (+16.7%)
  â†“
ë§¤ë„ ì‹¤í–‰
  - "ë§¤ë„í•˜ê¸°" ë²„íŠ¼ í´ë¦­
  - ìˆ˜ìˆ˜ë£Œ ì°¨ê° (Alpaca: $0, ì‹œë®¬ë ˆì´ì…˜: $0)
  - ìˆœìˆ˜ìµ: $35
  â†“
ë¦¬ì›Œë“œ ì§€ê¸‰
  - ì¹´í…Œê³ ë¦¬ í†µì¥ì— $35 ì…ê¸ˆ
  - "ì´ì œ ì›ë˜ í•˜ê³  ì‹¶ì—ˆë˜ ê²ƒ í•˜ì„¸ìš”!" ë©”ì‹œì§€
  - ìƒíƒœ: "ë§¤ë„ ì™„ë£Œ"
```

**ì‹œë®¬ë ˆì´ì…˜ ëª¨ë“œ:**
- DB ì—…ë°ì´íŠ¸ë§Œ
- ì‹¤ì œ ëˆ ì´ë™ ì—†ìŒ

**ì‹¤ì œ ëª¨ë“œ:**
- Alpaca APIë¡œ ì‹¤ì œ ë§¤ë„
- ì˜ˆì¹˜ê¸ˆì— ì…ê¸ˆ
- ì‚¬ìš©ìê°€ ì¶œê¸ˆ ê°€ëŠ¥

---

### **6ë‹¨ê³„: ì†ì‹¤ ì‹œ ë³´ìœ  ê°•ì œ**

```
ì†ì‹¤ í™•ì¸
  - í˜„ì¬ ê°€ì¹˜: $25
  - ë§¤ìˆ˜ ê°€ê²©: $30
  - ì†ì‹¤: -$5 (-16.7%)
  â†“
ë§¤ë„ ì‹œë„
  - "ë§¤ë„í•˜ê¸°" ë²„íŠ¼ ë¹„í™œì„±í™”
  - ë©”ì‹œì§€: "ì†ì‹¤ ìƒíƒœì—ì„œëŠ” ë§¤ë„í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ë³´ìœ ë¥¼ ìœ ì§€í•´ì•¼ í•©ë‹ˆë‹¤."
  â†“
ë³´ìœ  ê°•ì œ
  - ìƒíƒœ: "ë³´ìœ  ê°•ì œ"
  - ì¸ë‚´ì‹¬ í•™ìŠµ ë©”ì‹œì§€
  - ì£¼ê°€ íšŒë³µ ëŒ€ê¸°
```

---

## ğŸ”§ **ê¸°ìˆ  í”Œë¡œìš° (ì‹œë®¬ë ˆì´ì…˜ ëª¨ë“œ)**

### **ë°ì´í„° ëª¨ë¸ ê´€ê³„**

```
User
  â”œâ”€â”€ CategoryAccount (ì¹´í…Œê³ ë¦¬ë³„ í†µì¥)
  â”‚   â”œâ”€â”€ Transaction (ì…ê¸ˆ/ì¶œê¸ˆ ë‚´ì—­)
  â”‚   â””â”€â”€ SavingsReward (ì ˆì•½ â†’ íˆ¬ì)
  â”‚       â””â”€â”€ Stock (ì¢…ëª©)
  â””â”€â”€ DepositAccount (ì˜ˆì¹˜ê¸ˆ ê³„ì¢Œ) [ì‹¤ì œ ëª¨ë“œì—ì„œë§Œ]
      â””â”€â”€ DepositTransaction (ì˜ˆì¹˜ê¸ˆ ê±°ë˜)
```

---

### **API ì—”ë“œí¬ì¸íŠ¸ êµ¬ì¡°**

```
# ì¹´í…Œê³ ë¦¬ í†µì¥ ê´€ë¦¬
POST   /api/accounts/category-accounts/          # í†µì¥ ìƒì„±
GET    /api/accounts/category-accounts/          # í†µì¥ ëª©ë¡
POST   /api/accounts/category-accounts/{id}/deposit/    # ì…ê¸ˆ
POST   /api/accounts/category-accounts/{id}/withdraw/   # ì¶œê¸ˆ (ì†Œë¹„)
GET    /api/accounts/category-accounts/{id}/monthly-savings/  # ì ˆì•½ ê¸ˆì•¡

# ì ˆì•½ â†’ íˆ¬ì
POST   /api/accounts/category-accounts/{id}/invest-savings/    # ì ˆì•½ ê¸ˆì•¡ìœ¼ë¡œ íˆ¬ì
GET    /api/accounts/savings-rewards/            # íˆ¬ì ëª©ë¡
GET    /api/accounts/savings-rewards/{id}/       # íˆ¬ì ìƒì„¸
POST   /api/accounts/savings-rewards/{id}/sell/  # ë§¤ë„ (ìˆ˜ìµì¼ ë•Œë§Œ)

# ì£¼ê°€ ì—…ë°ì´íŠ¸ (ìŠ¤ì¼€ì¤„ëŸ¬)
POST   /api/accounts/savings-rewards/update-prices/  # ëª¨ë“  íˆ¬ìì˜ í˜„ì¬ê°€ ì—…ë°ì´íŠ¸
```

---

### **ì‹œë®¬ë ˆì´ì…˜ ëª¨ë“œ ë™ì‘**

#### **1. ì£¼ê°€ ë°ì´í„° ì†ŒìŠ¤**

```python
# ì‹œë®¬ë ˆì´ì…˜ ëª¨ë“œ: StockPrice í…Œì´ë¸” ì‚¬ìš©
latest_price = StockPrice.objects.filter(
    stock=stock
).order_by('-date').first()

# ì‹¤ì œ ëª¨ë“œ: Alpaca API ì‚¬ìš©
current_price = alpaca_api.get_current_price(symbol)
```

#### **2. ë§¤ìˆ˜ ì²˜ë¦¬**

```python
# ì‹œë®¬ë ˆì´ì…˜ ëª¨ë“œ
def create_savings_reward_simulation(account, stock_id, savings_amount):
    stock = Stock.objects.get(id=stock_id)
    latest_price = StockPrice.objects.filter(stock=stock).order_by('-date').first()
    current_price = latest_price.close_price
    
    # ì†Œìˆ˜ì  ì£¼ìˆ˜ ê°€ëŠ¥ (ì‹œë®¬ë ˆì´ì…˜)
    shares = savings_amount / current_price
    
    reward = SavingsReward.objects.create(
        account=account,
        savings_amount=savings_amount,
        stock=stock,
        purchase_price=current_price,
        shares=shares,
        current_price=current_price,
        status='invested'
    )
    
    # ì‹¤ì œ ëˆ ì´ë™ ì—†ìŒ
    account.pending_reward += savings_amount
    account.save()
    
    return reward
```

#### **3. ì£¼ê°€ ì—…ë°ì´íŠ¸ (ìŠ¤ì¼€ì¤„ëŸ¬)**

```python
# ë§¤ì¼ ì‹¤í–‰ (Celery)
@shared_task
def update_reward_prices_simulation():
    rewards = SavingsReward.objects.filter(status='invested')
    
    for reward in rewards:
        # ìµœì‹  ì£¼ê°€ ì¡°íšŒ
        latest_price = StockPrice.objects.filter(
            stock=reward.stock
        ).order_by('-date').first()
        
        if latest_price:
            reward.current_price = latest_price.close_price
            reward.update_current_value()  # ìˆ˜ìµ/ì†ì‹¤ ê³„ì‚°
```

#### **4. ë§¤ë„ ì²˜ë¦¬**

```python
# ì‹œë®¬ë ˆì´ì…˜ ëª¨ë“œ
def sell_reward_simulation(reward_id):
    reward = SavingsReward.objects.get(id=reward_id)
    
    if not reward.can_sell:
        raise ValueError("ì†ì‹¤ ìƒíƒœì—ì„œëŠ” ë§¤ë„í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.")
    
    # ìˆ˜ìˆ˜ë£Œ ê³„ì‚° (ì‹œë®¬ë ˆì´ì…˜: $0)
    commission = Decimal('0')
    net_proceeds = reward.current_value - commission
    
    # DB ì—…ë°ì´íŠ¸ë§Œ
    reward.sell_price = reward.current_price
    reward.sell_date = timezone.now()
    reward.commission = commission
    reward.net_proceeds = net_proceeds
    reward.status = 'sold'
    reward.save()
    
    # ì¹´í…Œê³ ë¦¬ í†µì¥ì— ë¦¬ì›Œë“œ ë°˜ì˜
    reward.account.realized_reward += net_proceeds
    reward.account.pending_reward -= reward.savings_amount
    reward.account.balance += net_proceeds  # ì‹œë®¬ë ˆì´ì…˜: ì”ì•¡ ì¦ê°€
    reward.account.save()
    
    return net_proceeds
```

---

## ğŸ¨ **UI/UX í”Œë¡œìš°**

### **í™ˆ í™”ë©´**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ¯ ì˜¤ëŠ˜ ì•„ë‚€ ëˆ: $5                â”‚
â”‚  ì´ë²ˆ ì£¼ ëˆ„ì : $25                  â”‚
â”‚  [ë¹ ë¥¸ ì…ë ¥] [í†µì¥ ê´€ë¦¬]            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“Š ë‚´ íˆ¬ì í˜„í™©                    â”‚
â”‚  â€¢ NVDA: +16.7% ($30 â†’ $35)        â”‚
â”‚    [ë§¤ë„í•˜ê¸°] âœ…                    â”‚
â”‚  â€¢ MSFT: -5.2% ($50 â†’ $47.4)       â”‚
â”‚    [ë³´ìœ  ì¤‘] â¸ï¸                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ’° ì¹´í…Œê³ ë¦¬ í†µì¥                   â”‚
â”‚  â€¢ ì¹´í˜/ë² ì´ì»¤ë¦¬: $25 (ì ˆì•½ $30)   â”‚
â”‚  â€¢ ê³¼ì: $10 (ì ˆì•½ $5)              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### **í†µì¥ ìƒì„¸ í™”ë©´**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ì¹´í˜/ë² ì´ì»¤ë¦¬ í†µì¥                 â”‚
â”‚  ì”ì•¡: $25                          â”‚
â”‚  ì›” ì˜ˆì‚°: $100                      â”‚
â”‚  ì´ë²ˆ ë‹¬ ì‚¬ìš©: $70                  â”‚
â”‚  ì ˆì•½: $30 âœ…                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

[ì´ë²ˆ ë‹¬ ì ˆì•½ìœ¼ë¡œ íˆ¬ìí•˜ê¸°] ë²„íŠ¼
  â†“
ì¢…ëª© ì„ íƒ í™”ë©´
  - Newturn ì¶”ì²œ ì¢…ëª©
  - ë©”ì´íŠ¸ ì ìˆ˜ í‘œì‹œ
  - "NVDA ì„ íƒ" í´ë¦­
  â†“
íˆ¬ì í™•ì¸
  - íˆ¬ì ê¸ˆì•¡: $30
  - ì¢…ëª©: NVDA
  - ì˜ˆìƒ ì£¼ìˆ˜: 0.06ì£¼
  - [íˆ¬ì ì‹¤í–‰] ë²„íŠ¼
```

### **íˆ¬ì ìƒì„¸ í™”ë©´**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  NVDA íˆ¬ì                          â”‚
â”‚  íˆ¬ì ê¸ˆì•¡: $30                     â”‚
â”‚  ë§¤ìˆ˜ ê°€ê²©: $500                    â”‚
â”‚  ë§¤ìˆ˜ ì£¼ìˆ˜: 0.06ì£¼                  â”‚
â”‚  ë§¤ìˆ˜ì¼: 2024-11-01                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  í˜„ì¬ ìƒíƒœ                          â”‚
â”‚  í˜„ì¬ê°€: $583.33                    â”‚
â”‚  í˜„ì¬ ê°€ì¹˜: $35                     â”‚
â”‚  ìˆ˜ìµë¥ : +16.7% âœ…                  â”‚
â”‚  ìˆ˜ìµ: +$5                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

[ë§¤ë„í•˜ê¸°] ë²„íŠ¼ (ìˆ˜ìµì¼ ë•Œë§Œ í™œì„±í™”)
ë˜ëŠ”
[ë³´ìœ  ì¤‘] (ì†ì‹¤ì¼ ë•Œ)
```

---

## âš™ï¸ **ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜**

### **ì‹œë®¬ë ˆì´ì…˜ ëª¨ë“œ êµ¬ì¡°**

```
Frontend (Next.js)
  â†“
Backend API (Django REST Framework)
  â†“
Database (SQLite/PostgreSQL)
  â”œâ”€â”€ CategoryAccount
  â”œâ”€â”€ Transaction
  â”œâ”€â”€ SavingsReward
  â””â”€â”€ StockPrice (ì£¼ê°€ ë°ì´í„°)
  â†“
Celery (ì£¼ê¸°ì  ì‘ì—…)
  â””â”€â”€ ì£¼ê°€ ì—…ë°ì´íŠ¸ (ë§¤ì¼)
```

### **ì‹¤ì œ ëª¨ë“œ êµ¬ì¡° (ì¶”í›„)**

```
Frontend (Next.js)
  â†“
Backend API (Django REST Framework)
  â†“
Database (PostgreSQL)
  â”œâ”€â”€ CategoryAccount
  â”œâ”€â”€ DepositAccount
  â”œâ”€â”€ SavingsReward
  â””â”€â”€ UserBankAccount
  â†“
External APIs
  â”œâ”€â”€ Alpaca API (ì£¼ì‹ ë§¤ë§¤)
  â””â”€â”€ Plaid API (ì€í–‰ ì—°ë™)
  â†“
Celery (ì£¼ê¸°ì  ì‘ì—…)
  â”œâ”€â”€ ì£¼ê°€ ì—…ë°ì´íŠ¸ (ë§¤ì¼)
  â””â”€â”€ í¬ì§€ì…˜ ë™ê¸°í™” (ë§¤ì¼)
```

---

## ğŸ“… **ì¼ì¼/ì£¼ê¸°ì  ì‘ì—…**

### **ë§¤ì¼ ìë™ ì‹¤í–‰ (Celery)**

1. **ì£¼ê°€ ì—…ë°ì´íŠ¸** (ì˜¤ì „ 9ì‹œ, ì¥ ì‹œì‘ í›„)
   ```python
   @shared_task
   def daily_price_update():
       # 1. StockPrice í…Œì´ë¸” ì—…ë°ì´íŠ¸ (Yahoo Finance ë˜ëŠ” Alpaca)
       # 2. ëª¨ë“  SavingsRewardì˜ í˜„ì¬ê°€ ì—…ë°ì´íŠ¸
       # 3. ìˆ˜ìµ/ì†ì‹¤ ê³„ì‚°
       # 4. ë§¤ë„ ê°€ëŠ¥ ì—¬ë¶€ ì—…ë°ì´íŠ¸
   ```

2. **ì•Œë¦¼ ë°œì†¡** (ì„ íƒ)
   ```python
   @shared_task
   def send_profit_notifications():
       # ìˆ˜ìµ ë‹¬ì„±í•œ íˆ¬ìì— ëŒ€í•´ ì‚¬ìš©ìì—ê²Œ ì•Œë¦¼
   ```

### **ë§¤ì£¼ ìë™ ì‹¤í–‰**

1. **ì›”ê°„ ì ˆì•½ ê³„ì‚°** (ë§¤ì›” 1ì¼)
   ```python
   @shared_task
   def monthly_savings_calculation():
       # ëª¨ë“  CategoryAccountì˜ ì´ë²ˆ ë‹¬ ì ˆì•½ ê³„ì‚°
       # ë‹¤ìŒ ë‹¬ ì˜ˆì‚° ì´ˆê¸°í™”
   ```

---

## ğŸš€ **êµ¬í˜„ ë‹¨ê³„**

### **Phase 1: ì‹œë®¬ë ˆì´ì…˜ MVP (2-3ì£¼)**

**ëª©í‘œ**: ì‹¤ì œ ê³„ì¢Œ ì—†ì´ ì „ì²´ í”Œë¡œìš° êµ¬í˜„

**ì‘ì—…:**
1. âœ… ë°ì´í„° ëª¨ë¸ ìƒì„±
   - `CategoryAccount`
   - `Transaction`
   - `SavingsReward`

2. âœ… API ì—”ë“œí¬ì¸íŠ¸ êµ¬í˜„
   - í†µì¥ ê´€ë¦¬ (ìƒì„±, ì…ê¸ˆ, ì¶œê¸ˆ)
   - ì ˆì•½ ê³„ì‚°
   - íˆ¬ì ìƒì„± (ì‹œë®¬ë ˆì´ì…˜)
   - ë§¤ë„ ì²˜ë¦¬ (ì‹œë®¬ë ˆì´ì…˜)

3. âœ… í”„ë¡ íŠ¸ì—”ë“œ UI
   - í™ˆ í™”ë©´
   - í†µì¥ ê´€ë¦¬
   - íˆ¬ì í˜„í™©
   - íˆ¬ì ìƒì„¸

4. âœ… ì£¼ê°€ ì—…ë°ì´íŠ¸ ìŠ¤ì¼€ì¤„ëŸ¬
   - Celery ì‘ì—…
   - StockPrice í…Œì´ë¸” ì‚¬ìš©

5. âœ… í…ŒìŠ¤íŠ¸
   - ì „ì²´ í”Œë¡œìš° í…ŒìŠ¤íŠ¸
   - ìˆ˜ìµ/ì†ì‹¤ ì‹œë‚˜ë¦¬ì˜¤ í…ŒìŠ¤íŠ¸

### **Phase 2: ì‹¤ì œ ê³„ì¢Œ ì—°ë™ (4-6ì£¼)**

**ëª©í‘œ**: Alpaca + Plaid ì—°ë™

**ì‘ì—…:**
1. Alpaca API ì—°ë™
2. Plaid API ì—°ë™
3. ì˜ˆì¹˜ê¸ˆ ì‹œìŠ¤í…œ
4. ì‹¤ì œ ë§¤ë§¤ ë¡œì§
5. í¬ì§€ì…˜ ë™ê¸°í™”

---

## ğŸ“Š **ë°ì´í„° íë¦„ ì˜ˆì‹œ**

### **ì‹œë‚˜ë¦¬ì˜¤: ì»¤í”¼ ì ˆì•½ â†’ NVDA íˆ¬ì**

```
1. ì‚¬ìš©ì ê°€ì…
   User ìƒì„±

2. í†µì¥ ìƒì„±
   CategoryAccount ìƒì„±
   - name: "ì¹´í˜/ë² ì´ì»¤ë¦¬ í†µì¥"
   - monthly_budget: $100
   - balance: $0

3. ì›” ì´ˆ ì…ê¸ˆ
   Transaction ìƒì„±
   - type: 'deposit'
   - amount: $100
   CategoryAccount.balance = $100

4. ì¼ì£¼ì¼ ì†Œë¹„
   Transaction ìƒì„± (ì—¬ëŸ¬ ê°œ)
   - type: 'withdrawal'
   - amount: $5 (ì»¤í”¼)
   - amount: $3 (ë„ë„›)
   - ...
   CategoryAccount.current_month_spent = $70
   CategoryAccount.balance = $30

5. ì›”ë§ ì ˆì•½ ê³„ì‚°
   savings = $100 - $70 = $30

6. NVDA íˆ¬ì
   SavingsReward ìƒì„±
   - savings_amount: $30
   - stock: NVDA
   - purchase_price: $500
   - shares: 0.06
   - status: 'invested'
   CategoryAccount.pending_reward = $30

7. ì£¼ê°€ ìƒìŠ¹ (2ì£¼ í›„)
   StockPrice ì—…ë°ì´íŠ¸
   - NVDA: $583.33
   SavingsReward ì—…ë°ì´íŠ¸
   - current_price: $583.33
   - current_value: $35
   - return_rate: +16.7%
   - is_profitable: True
   - can_sell: True

8. ë§¤ë„ ì‹¤í–‰
   SavingsReward ì—…ë°ì´íŠ¸
   - sell_price: $583.33
   - net_proceeds: $35
   - status: 'sold'
   CategoryAccount ì—…ë°ì´íŠ¸
   - realized_reward: $35
   - pending_reward: $0
   - balance: $65
```

---

## ğŸ¯ **í•µì‹¬ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§**

### **ì ˆì•½ ê³„ì‚°**
```python
savings = monthly_budget - current_month_spent
if savings < 0:
    savings = 0  # ìŒìˆ˜ëŠ” 0ìœ¼ë¡œ
```

### **ë§¤ë„ ê°€ëŠ¥ ì—¬ë¶€**
```python
can_sell = current_value > (purchase_price * shares)
```

### **ìˆ˜ìµë¥  ê³„ì‚°**
```python
return_rate = ((current_value - purchase_cost) / purchase_cost) * 100
```

---

## ğŸ“ **ë‹¤ìŒ ì•¡ì…˜**

### **ì¦‰ì‹œ ì‹œì‘:**
1. [ ] ë°ì´í„° ëª¨ë¸ ìƒì„± (`CategoryAccount`, `Transaction`, `SavingsReward`)
2. [ ] ë§ˆì´ê·¸ë ˆì´ì…˜ ìƒì„± ë° ì ìš©
3. [ ] ê¸°ë³¸ API ì—”ë“œí¬ì¸íŠ¸ êµ¬í˜„

### **ì´ë²ˆ ì£¼:**
1. [ ] í”„ë¡ íŠ¸ì—”ë“œ UI í”„ë¡œí† íƒ€ì…
2. [ ] ì‹œë®¬ë ˆì´ì…˜ ëª¨ë“œ í…ŒìŠ¤íŠ¸
3. [ ] Celery ìŠ¤ì¼€ì¤„ëŸ¬ ì„¤ì •

---

**ì‘ì„±ì**: AI Assistant  
**ì—…ë°ì´íŠ¸**: 2024.11.07

